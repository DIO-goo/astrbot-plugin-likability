# Astrbot好感度插件系统

这是一个为Astrbot设计的好感度插件系统，提供了以下功能：

## 功能特性

### 1. 签到抽卡系统
- 用户可以通过`/rp`命令进行每日抽卡
- 根据抽卡结果增加或减少好感度
- 记录累计签到天数和上次签到时间

### 2. 好感度管理系统
- 好感度上限可配置（默认100）
- 新用户初始好感度可配置（默认20）
- 根据好感度值划分不同的关系等级

### 3. 用户画像系统
- 支持自定义用户昵称
- 支持自定义用户印象
- 在生成提示词时会附加用户画像信息

### 4. 黑名单系统
- 管理员可以将用户加入黑名单
- 黑名单用户无法使用用户画像系统
- 在生成提示词时会附加黑名单提示

### 5. 管理员系统
- 支持配置管理员列表
- 管理员可以设置用户好感度
- 管理员可以管理黑名单

## 使用方法

### 用户命令

1. **抽卡命令**
   ```
   /rp
   ```
   每日抽卡，根据结果增加或减少好感度。

2. **查询好感度**
   ```
   /likabilityGet [用户ID]
   ```
   查询自己或指定用户的好感度信息。

3. **设置用户昵称**
   ```
   /setUserNickname 昵称
   ```
   设置自己的昵称。

4. **设置用户印象**
   ```
   /setUserPersona 印象描述
   ```
   设置对用户的印象。

### 管理员命令

1. **设置好感度**
   ```
   /likabilitySet 用户ID 调整数值
   ```
   管理员可以调整指定用户的好感度。

2. **添加到黑名单**
   ```
   /likabilityBlackList 用户ID
   ```
   管理员可以将指定用户加入黑名单。

## 配置说明

在`_conf_schema.json`中可以配置以下参数：

```json
{
  "LIKABILITY_CONFIG": {
    "max_likability": 100,
    "initial_likability": 20,
    "admin_list": []
  }
}
```

- `max_likability`: 好感度上限
- `initial_likability`: 新用户初始好感度
- `admin_list`: 管理员用户ID列表

## 好感度等级

根据好感度值与上限的比例，划分为以下等级：

- 疏离回避 (< 0%)
- 泛泛而识 (0% - 20%)
- 普通熟人 (20% - 40%)
- 可靠伙伴 (40% - 60%)
- 亲密伙伴 (60% - 80%)
- 信任挚友 (80% - 100%)
- 灵魂共鸣 (> 100%)

## 抽卡结果

抽卡结果根据随机数0-100划分：

- 0: -8点好感度
- 1-10: -4点好感度
- 11-20: -3点好感度
- 21-30: -2点好感度
- 31-40: -1点好感度
- 41-50: 0点好感度
- 51-60: +1点好感度
- 61-70: +2点好感度
- 71-80: +3点好感度
- 81-90: +4点好感度
- 91-99: +5点好感度
- 100: +10点好感度

## 数据存储

系统会自动创建以下数据文件：

- `likability_data.json`: 存储用户好感度数据
- `user_profile_data.json`: 存储用户画像数据
- `blacklist_data.json`: 存储黑名单数据

所有数据文件都存储在`data/plugins_WealthAndContract_data/`目录下。